<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h2>Create Account</h2>
      <p>Join us and get started</p>
    </div>

    <form #registerForm="ngForm" (ngSubmit)="register(registerForm)" class="register-form">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Username</mat-label>
        <input
          matInput
          type="text"
          ngModel
          name="userName"
          id="userName"
          placeholder="Enter username"
          required
        />
        <mat-icon matSuffix>person</mat-icon>
        <mat-hint>Choose a username</mat-hint>
        <mat-error *ngIf="registerForm.controls['userName']?.invalid && registerForm.controls['userName']?.touched">
          Username is required
        </mat-error>
      </mat-form-field>

      <div class="name-fields">
        <mat-form-field appearance="outline" class="name-field">
          <mat-label>First Name</mat-label>
          <input
            matInput
            type="text"
            ngModel
            name="userFirstName"
            id="userFirstName"
            placeholder="First name"
            required
          />
          <mat-icon matSuffix>badge</mat-icon>
          <mat-error *ngIf="registerForm.controls['userFirstName']?.invalid && registerForm.controls['userFirstName']?.touched">
            First name is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="name-field">
          <mat-label>Last Name</mat-label>
          <input
            matInput
            type="text"
            ngModel
            name="userLastName"
            id="userLastName"
            placeholder="Last name"
            required
          />
          <mat-icon matSuffix>badge</mat-icon>
          <mat-error *ngIf="registerForm.controls['userLastName']?.invalid && registerForm.controls['userLastName']?.touched">
            Last name is required
          </mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Password</mat-label>
        <input
          matInput
          [type]="hidePassword ? 'password' : 'text'"
          ngModel
          name="userPassword"
          id="userPassword"
          placeholder="Enter password"
          required
          minlength="6"
        />
        <button mat-icon-button matSuffix type="button" (click)="hidePassword = !hidePassword" 
                [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-hint>Create a strong password (min. 6 characters)</mat-hint>
        <mat-error *ngIf="registerForm.controls['userPassword']?.invalid && registerForm.controls['userPassword']?.touched">
          Password must be at least 6 characters long
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Confirm Password</mat-label>
        <input
          matInput
          [type]="hideConfirmPassword ? 'password' : 'text'"
          ngModel
          name="confirmPassword"
          id="confirmPassword"
          placeholder="Confirm password"
          required
        />
        <button mat-icon-button matSuffix type="button" (click)="hideConfirmPassword = !hideConfirmPassword" 
                [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideConfirmPassword">
          <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-hint>Re-enter your password</mat-hint>
        <mat-error *ngIf="registerForm.controls['confirmPassword']?.touched && !passwordsMatch()">
          Passwords do not match
        </mat-error>
      </mat-form-field>

      <button
        mat-flat-button
        color="primary"
        class="register-btn"
        type="submit"
        [disabled]="!isFormValid()"
      >
        <mat-icon>how_to_reg</mat-icon>
        Create Account
      </button>
    </form>

    <div class="login-link">
      <p>
        Already have an account?
        <a routerLink="/login" class="login-text">
          Sign in here
        </a>
      </p>
    </div>
  </div>
</div>